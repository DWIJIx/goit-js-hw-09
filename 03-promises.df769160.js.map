{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,SAC7BC,OAAOF,SAASC,cAAc,oBAC9BE,KAAKH,SAASC,cAAc,mBAC5BG,OAAQJ,SAASC,cAAc,qBAC/BI,OAAQL,SAASC,cAAc,gBA2BjC,SAASK,EAAcC,EAAUC,GAC/B,MAAMC,EAAgBC,KAAKC,SAAW,GAEtC,OAAO,IAAIC,SAAQ,CAACC,EAAKC,KACvBC,YAAW,KACLN,EACFI,EAAI,C,SAAEN,E,MAAUC,IAEhBM,EAAI,C,SAAEP,E,MAAUC,GAAQ,GAEzBA,EAAM,G,CAIb,SAASQ,GAAUT,SAAEA,EAAQC,MAAEA,IAC7BS,EAAArB,GAASsB,OAAOC,QAAQ,uBAAqBZ,QAAiBC,M,CAGhE,SAASY,GAAQb,SAAEA,EAAQC,MAAEA,IAC3BS,EAAArB,GAASsB,OAAOG,QAAQ,sBAAoBd,QAAeC,M,CA1C7DV,EAAKC,KAAKuB,iBAAiB,UAE3B,SAAsBC,GACpBA,EAAEC,iBA4CF1B,EAAKC,KAAK0B,UAAW,EACrB3B,EAAKI,OAAOuB,UAAW,EACvB3B,EAAKK,KAAKsB,UAAW,EACrB3B,EAAKM,OAAOqB,UAAW,EACvB3B,EAAKO,OAAOoB,UAAW,EA5CvB,MAAMvB,EAASwB,OAAO5B,EAAKI,OAAOyB,OAC5BxB,EAAOuB,OAAO5B,EAAKK,KAAKwB,OACxBvB,EAASsB,OAAO5B,EAAKM,OAAOuB,OAIlCZ,YAAW,KA0CXjB,EAAKC,KAAK0B,UAAW,EACrB3B,EAAKI,OAAOuB,UAAW,EACvB3B,EAAKK,KAAKsB,UAAW,EACrB3B,EAAKM,OAAOqB,UAAW,EACvB3B,EAAKO,OAAOoB,UAAW,CA7CT,GAHIvB,EAASC,EAAOC,GAMlC,IAAK,IAAIwB,EAAI,EAAGA,GAAKxB,EAAQwB,GAAK,EAAE,CAElCtB,EAAcsB,EADI1B,EAASC,GAAQyB,EAAI,IACXC,KAAKb,GAAWc,MAAMV,E","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  fDelay:document.querySelector('[name = \"delay\"]'),\n  step:document.querySelector('[name = \"step\"]'),\n  amount: document.querySelector('[name = \"amount\"]'),\n  button: document.querySelector('form button')\n};\n\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  formDisable();\n  \n\n  const fDelay = Number(refs.fDelay.value);\n  const step = Number(refs.step.value);\n  const amount = Number(refs.amount.value);\n  \n  const totalTime = fDelay + step * amount;\n  \n  setTimeout(() => {\n    formEnable()\n  },totalTime)\n\n  for (let i = 1; i <= amount; i += 1){\n    const delayStep = fDelay + step * (i - 1);\n    createPromise(i, delayStep).then(onSuccess).catch(onError)\n  };\n};\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  return new Promise((res, rej) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        res({ position, delay })\n      } else {\n        rej({ position, delay })\n      }\n    }, delay);\n  });\n};\n\nfunction onSuccess({ position, delay }) { \n  Notiflix.Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n};\n\nfunction onError({ position, delay }) {\n  Notiflix.Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n  \n};\n\nfunction formDisable() {\n  refs.form.disabled = true;\n  refs.fDelay.disabled = true;\n  refs.step.disabled = true;\n  refs.amount.disabled = true;\n  refs.button.disabled = true;\n}\n\nfunction formEnable() {\n  refs.form.disabled = false;\n  refs.fDelay.disabled = false;\n  refs.step.disabled = false;\n  refs.amount.disabled = false;\n  refs.button.disabled = false;\n}"],"names":["$7Y9D8","parcelRequire","$47d4ff9957288465$var$refs","form","document","querySelector","fDelay","step","amount","button","$47d4ff9957288465$var$createPromise","position","delay","shouldResolve","Math","random","Promise","res","rej","setTimeout","$47d4ff9957288465$var$onSuccess","$parcel$interopDefault","Notify","success","$47d4ff9957288465$var$onError","failure","addEventListener","e","preventDefault","disabled","Number","value","i","then","catch"],"version":3,"file":"03-promises.df769160.js.map"}